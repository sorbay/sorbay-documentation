{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Get started Before getting started using sorbay and running your own service, a workspace must be created. When you first log in to the sorbay platform, you will be asked to provide the name for the first workspace to be created. You can then use the name to create the service. Navigation On the left side you find the main navigation menu. It provides the following options: Workspace selector - shows the currently selected workspace. Start - changes back to the start page that is also presented to the user after logging in. Services - opens the services page which allows to create, change and delete services. Members - opens the members page where you can add or remove members for the currently selected workspace. Settings - opens the workspace settings page . Basic Workflow Select the workspace you want to create services in, with the workspace selection in the top-most navigation entry. Create and / or change services in the currently selected workspace by clicking the \"Services\" option in the navigation. Add more users to this workspace by selecting the \"Members\" menu option in the navigation. Change the settings of the currently selected workspace by selecting the \"Settings\" option in the navigation.","title":"Welcome"},{"location":"#get-started","text":"Before getting started using sorbay and running your own service, a workspace must be created. When you first log in to the sorbay platform, you will be asked to provide the name for the first workspace to be created. You can then use the name to create the service.","title":"Get started"},{"location":"#navigation","text":"On the left side you find the main navigation menu. It provides the following options: Workspace selector - shows the currently selected workspace. Start - changes back to the start page that is also presented to the user after logging in. Services - opens the services page which allows to create, change and delete services. Members - opens the members page where you can add or remove members for the currently selected workspace. Settings - opens the workspace settings page .","title":"Navigation"},{"location":"#basic-workflow","text":"Select the workspace you want to create services in, with the workspace selection in the top-most navigation entry. Create and / or change services in the currently selected workspace by clicking the \"Services\" option in the navigation. Add more users to this workspace by selecting the \"Members\" menu option in the navigation. Change the settings of the currently selected workspace by selecting the \"Settings\" option in the navigation.","title":"Basic Workflow"},{"location":"help/","text":"Support In case you run into any unexpected problem and require technical assistance, for the time being (during the Beta test phase) please contact the sorbay support at the following email address: support@sorbay.com","title":"Help"},{"location":"help/#support","text":"In case you run into any unexpected problem and require technical assistance, for the time being (during the Beta test phase) please contact the sorbay support at the following email address: support@sorbay.com","title":"Support"},{"location":"members/","text":"This page allows you to create, change and remove workspace members. You can search for one or multiple users by using the \"Filter\" input field, where you can enter a full or partial name. The page shows you a list of all members of the currently selected workspace, based on the currently set filter. If no filter is set, all users are listed. Adding new members To add one or multiple new members, click the \"Add Member\" button in the lower right corner. It will open this dialog: In the \"Email or username\" input field, you can enter one or multiple email addresses or usernames. NOTE: You can enter usernames or email addresses of valid, existing users - or even of inexistent users. This allows you to pre-invite users that will maybe only later be able to perform the registration procedure. With the drop-down list below, select the role for the new member(s): Workspace admin: The user can administrate workspaces, i.e. change workspace settings, create new workspaces, and delete them. Service admin: The user can create, change and remove services. Click the \"Send invitation\" button to trigger an email with an invitation link being sent to the given users.","title":"Members"},{"location":"members/#adding-new-members","text":"To add one or multiple new members, click the \"Add Member\" button in the lower right corner. It will open this dialog: In the \"Email or username\" input field, you can enter one or multiple email addresses or usernames. NOTE: You can enter usernames or email addresses of valid, existing users - or even of inexistent users. This allows you to pre-invite users that will maybe only later be able to perform the registration procedure. With the drop-down list below, select the role for the new member(s): Workspace admin: The user can administrate workspaces, i.e. change workspace settings, create new workspaces, and delete them. Service admin: The user can create, change and remove services. Click the \"Send invitation\" button to trigger an email with an invitation link being sent to the given users.","title":"Adding new members"},{"location":"profile/","text":"On the profile page, you can change all the settings related to your personal user profile. To open the profile page, click the \"Profile\" option on the selector in the upper right corner: Email verification In case your email address has not been verified yet, you will be shown a notification message at the top of the screen which indicates that you can re-send the email with the verification link. Click this link to receive another email and then click the link in that mail to verify your mail address. Profile settings In the \"Profile\" section, you can set or change the following attributes: First name Last name Username Email address Preferred language Press the \"Save\" button in the lower right corner to apply and save the changes. Password To change your password, click the \"Change Password\" button in the \"Password\" section: This will open a popup dialog, where you can enter the new password string: Apply and save the new password by clicking the \"Submit\" button. Security For increased account security, it is recommended to enable two-factor authentication, using the widely available \"Google Authenticator\" app (iOS, Android). To enable it for your account, click on the \"Two-Factor Authentication\" button, which opens this dialog with a QR code: Open your Authenticator app on your iOS or Android device, and scan the QR code. This will create a new entry in your Authenticator app under the label \"sorbay\". Then continue to the next dialog, where you will have to enter the code currently displayed in the Authenticator app, to confirm that the QR code was correctly processed: Finally, another dialog will provide a download for backup recovery codes, that you can use to recover your account in case your iOS or Android device gets lost, stolen or damaged, and you cannot use the Authenticator app anymore. Download the recovery codes by clicking the \"Backup recovery codes\" button, and then \"Confirm download\". Congratulations, you have now enabled two-factor authentication. The \"Security\" section in the profile page now looks like this: Click \"Disable two factor authentication\" to switch back to logging in with password-only Click \"Download recovery codes\" to re-download your recovery codes Click \"Reset recovery codes\" to create a new set of recovery codes Account deletion You can remove your account completely in the last section at the bottom of the screen, under \"Account deletion\". NOTE: This action will irretrievably remove your user account and all corresponding data, and cannot be undone!","title":"Profile"},{"location":"profile/#email-verification","text":"In case your email address has not been verified yet, you will be shown a notification message at the top of the screen which indicates that you can re-send the email with the verification link. Click this link to receive another email and then click the link in that mail to verify your mail address.","title":"Email verification"},{"location":"profile/#profile-settings","text":"In the \"Profile\" section, you can set or change the following attributes: First name Last name Username Email address Preferred language Press the \"Save\" button in the lower right corner to apply and save the changes.","title":"Profile settings"},{"location":"profile/#password","text":"To change your password, click the \"Change Password\" button in the \"Password\" section: This will open a popup dialog, where you can enter the new password string: Apply and save the new password by clicking the \"Submit\" button.","title":"Password"},{"location":"profile/#security","text":"For increased account security, it is recommended to enable two-factor authentication, using the widely available \"Google Authenticator\" app (iOS, Android). To enable it for your account, click on the \"Two-Factor Authentication\" button, which opens this dialog with a QR code: Open your Authenticator app on your iOS or Android device, and scan the QR code. This will create a new entry in your Authenticator app under the label \"sorbay\". Then continue to the next dialog, where you will have to enter the code currently displayed in the Authenticator app, to confirm that the QR code was correctly processed: Finally, another dialog will provide a download for backup recovery codes, that you can use to recover your account in case your iOS or Android device gets lost, stolen or damaged, and you cannot use the Authenticator app anymore. Download the recovery codes by clicking the \"Backup recovery codes\" button, and then \"Confirm download\". Congratulations, you have now enabled two-factor authentication. The \"Security\" section in the profile page now looks like this: Click \"Disable two factor authentication\" to switch back to logging in with password-only Click \"Download recovery codes\" to re-download your recovery codes Click \"Reset recovery codes\" to create a new set of recovery codes","title":"Security"},{"location":"profile/#account-deletion","text":"You can remove your account completely in the last section at the bottom of the screen, under \"Account deletion\". NOTE: This action will irretrievably remove your user account and all corresponding data, and cannot be undone!","title":"Account deletion"},{"location":"services/","text":"This page allows you to create, change and remove services. TODO risk service: There is a second service now, write what below? For the duration of the beta test, only 1 service is available. More services will be added and made available once the sorbay platform is officially released. Create a new service To create a new service, click the \"Create\" button in the lower right corner: A dialog will pop up with an input field, where you are asked to enter the name of the service: Once you have created one or more services, you will see this list of services available in the current workspace: Using a service In order to configure a newly created service, click the \"Service settings\" button in the \"...\"-popup dialog: This will open the settings page for that service instance, with the \"General\" tab selected:","title":"About"},{"location":"services/#create-a-new-service","text":"To create a new service, click the \"Create\" button in the lower right corner: A dialog will pop up with an input field, where you are asked to enter the name of the service: Once you have created one or more services, you will see this list of services available in the current workspace:","title":"Create a new service"},{"location":"services/#using-a-service","text":"In order to configure a newly created service, click the \"Service settings\" button in the \"...\"-popup dialog: This will open the settings page for that service instance, with the \"General\" tab selected:","title":"Using a service"},{"location":"settings/","text":"This page allows to change workspace settings add or remove workspace members delete the currently selected workspace Change workspace name Change the name of the currently selected workspace by entering any name here: Leave workspace You can leave the workspace, so as to no longer be a member and/or administrator of it: However, in case your account is currently the only administrator for the workspace, you need to first add another member with the role \"Workspace admin\". Delete workspace Finally you can delete the currently selected workspace: Click the \"Delete workspace\" button and confirm the deletion by clicking \"Yes\" in the confirmation pop-up dialog to delete the workspace and irrevocably remove all its associated services and resources .","title":"Settings"},{"location":"settings/#change-workspace-name","text":"Change the name of the currently selected workspace by entering any name here:","title":"Change workspace name"},{"location":"settings/#leave-workspace","text":"You can leave the workspace, so as to no longer be a member and/or administrator of it: However, in case your account is currently the only administrator for the workspace, you need to first add another member with the role \"Workspace admin\".","title":"Leave workspace"},{"location":"settings/#delete-workspace","text":"Finally you can delete the currently selected workspace: Click the \"Delete workspace\" button and confirm the deletion by clicking \"Yes\" in the confirmation pop-up dialog to delete the workspace and irrevocably remove all its associated services and resources .","title":"Delete workspace"},{"location":"sorbay_ciam/","text":"sorbay_ciam Functionality The sorbay_ciam provides user management with authentication and self-service capabilities for end users. The overall strategy is a \"Bring your own UI\" so you may use the provided API from sorbay_ciam to integrate the capabilities in your app. Authentication It provides the means to authenticate users, including two-factor authentication with the Google Authenticator app (iOS and Android). Self-Service The sorbay_ciam service includes self-service functionality, that allows your users to manage their account and profile themselves, such as changing the password, changing user attributes or enabling two-factor authentication. Configuration To configure an instance of the sorbay_ciam service, click the \"Service settings\" option in the popup menu of an entry in the services list: You will then be presented with the settings of that instance of the sorbay_ciam service. Its functionality is grouped in 4 tabs: General - general settings for this sorbay_ciam service instance Users - user-related configuration settings Pages - custom UI URL configuration Accounts - management of service user accounts General Open service UI At the top, you find the button \"Open interfaces\" which will open a new browser window with the URL of this instance of the sorbay_ciam service. What is displayed here exactly, varies if you configure custom UI URLs in the \"Pages\" section. Service name In the \"Base\" section, you can change the name of the service. Save your change by clicking the \"Save\" button in the lower right corner. Delete service Under \"Service deletion\", you can delete this service instance entirely. NOTE: This change cannot be undone! It will irrevocably delete the service and all related data and resources. Delete the service by clicking the \"Delete service\" button, and then confirm the deletion in the following pop-up dialog. Users Under the \"Users\" tab, you find various sections where you can configure several aspects related to the authentication and data storage of service users. Authentication Set the required minimum length for the password by adjusting the slider to the desired value. Enable the checkbox to enforce a check, that prevents from passwords that are equal to the username. Two Factor By enabling the \"Enforce two factor authentication\" checkbox in this section, users will be forced to enable two-factor authentication. Schema Here you will be able to adapt the data schema for storing user accounts. This functionality is not yet available during the beta testing phase! Pages Following the \"Bring your own UI\" philosophy, the sorbay_ciam service allows you to configure custom frontend URLs here. This could be custom-written JavaScript frontends, that integrate with the service API. Follow the instructions how to configure and launch our demo UI application. \"Login URL\" - Login application URL \"Registration URL\" - Registration application URL \"Verification URL\" - Verification application URL \"Recovery URL\" - Recovery application URL \"Settings URL\" - Settings application URL \"Error URL\" - Error application URL Redirects \"Default URL\" - \"Login URL\" - Login redirect URL \"Registration URL\" - Registration redirect URL \"Settings URL\" - Settings redirect URL \"Verification URL\" - Verification redirect URL \"Logout URL\" - Logout redirect URL CORS Add any custom allowed origin URLs in this section by clicking the \"+ Allowed Origin URL\" button. Click the \"Save\" button in the lower right corner to save the new URL. Custom Finally, you may set a custom domain name, and define a custom domain for the session cookie, depending on your application's requirements. You will have to create a CNAME record with the DNS provider with which the domain is registered, with the value that's provided in this view. It is important that you add CORS origins to your custom domain to ensure Single Page Applications (SPAs) support. Accounts Under this tab, you can manage user accounts for users of the service. Create user To create a new service user, click the \"+ Create user\" button: This will open the following pop-up dialog where you can enter the details of the new user account: Chose the status for the new user account (\"active\" or \"inactive\") and then create the new account by clicking the \"Create user\" button. User list Once you have created one or more service users, they will be listed under the \"Accounts\" tab: Edit user To edit a user account, click the symbol, or the \"Open user\" option in the pop-up menu: Delete user To delete a user account, click the \"Delete user\" option in the pop-up menu:","title":"Configuration"},{"location":"sorbay_ciam/#sorbay_ciam","text":"","title":"sorbay_ciam"},{"location":"sorbay_ciam/#functionality","text":"The sorbay_ciam provides user management with authentication and self-service capabilities for end users. The overall strategy is a \"Bring your own UI\" so you may use the provided API from sorbay_ciam to integrate the capabilities in your app.","title":"Functionality"},{"location":"sorbay_ciam/#authentication","text":"It provides the means to authenticate users, including two-factor authentication with the Google Authenticator app (iOS and Android).","title":"Authentication"},{"location":"sorbay_ciam/#self-service","text":"The sorbay_ciam service includes self-service functionality, that allows your users to manage their account and profile themselves, such as changing the password, changing user attributes or enabling two-factor authentication.","title":"Self-Service"},{"location":"sorbay_ciam/#configuration","text":"To configure an instance of the sorbay_ciam service, click the \"Service settings\" option in the popup menu of an entry in the services list: You will then be presented with the settings of that instance of the sorbay_ciam service. Its functionality is grouped in 4 tabs: General - general settings for this sorbay_ciam service instance Users - user-related configuration settings Pages - custom UI URL configuration Accounts - management of service user accounts","title":"Configuration"},{"location":"sorbay_ciam/#general","text":"","title":"General"},{"location":"sorbay_ciam/#open-service-ui","text":"At the top, you find the button \"Open interfaces\" which will open a new browser window with the URL of this instance of the sorbay_ciam service. What is displayed here exactly, varies if you configure custom UI URLs in the \"Pages\" section.","title":"Open service UI"},{"location":"sorbay_ciam/#service-name","text":"In the \"Base\" section, you can change the name of the service. Save your change by clicking the \"Save\" button in the lower right corner.","title":"Service name"},{"location":"sorbay_ciam/#delete-service","text":"Under \"Service deletion\", you can delete this service instance entirely. NOTE: This change cannot be undone! It will irrevocably delete the service and all related data and resources. Delete the service by clicking the \"Delete service\" button, and then confirm the deletion in the following pop-up dialog.","title":"Delete service"},{"location":"sorbay_ciam/#users","text":"Under the \"Users\" tab, you find various sections where you can configure several aspects related to the authentication and data storage of service users.","title":"Users"},{"location":"sorbay_ciam/#authentication_1","text":"Set the required minimum length for the password by adjusting the slider to the desired value. Enable the checkbox to enforce a check, that prevents from passwords that are equal to the username.","title":"Authentication"},{"location":"sorbay_ciam/#two-factor","text":"By enabling the \"Enforce two factor authentication\" checkbox in this section, users will be forced to enable two-factor authentication.","title":"Two Factor"},{"location":"sorbay_ciam/#schema","text":"Here you will be able to adapt the data schema for storing user accounts. This functionality is not yet available during the beta testing phase!","title":"Schema"},{"location":"sorbay_ciam/#pages","text":"Following the \"Bring your own UI\" philosophy, the sorbay_ciam service allows you to configure custom frontend URLs here. This could be custom-written JavaScript frontends, that integrate with the service API. Follow the instructions how to configure and launch our demo UI application. \"Login URL\" - Login application URL \"Registration URL\" - Registration application URL \"Verification URL\" - Verification application URL \"Recovery URL\" - Recovery application URL \"Settings URL\" - Settings application URL \"Error URL\" - Error application URL","title":"Pages"},{"location":"sorbay_ciam/#redirects","text":"\"Default URL\" - \"Login URL\" - Login redirect URL \"Registration URL\" - Registration redirect URL \"Settings URL\" - Settings redirect URL \"Verification URL\" - Verification redirect URL \"Logout URL\" - Logout redirect URL","title":"Redirects"},{"location":"sorbay_ciam/#cors","text":"Add any custom allowed origin URLs in this section by clicking the \"+ Allowed Origin URL\" button. Click the \"Save\" button in the lower right corner to save the new URL.","title":"CORS"},{"location":"sorbay_ciam/#custom","text":"Finally, you may set a custom domain name, and define a custom domain for the session cookie, depending on your application's requirements. You will have to create a CNAME record with the DNS provider with which the domain is registered, with the value that's provided in this view. It is important that you add CORS origins to your custom domain to ensure Single Page Applications (SPAs) support.","title":"Custom"},{"location":"sorbay_ciam/#accounts","text":"Under this tab, you can manage user accounts for users of the service.","title":"Accounts"},{"location":"sorbay_ciam/#create-user","text":"To create a new service user, click the \"+ Create user\" button: This will open the following pop-up dialog where you can enter the details of the new user account: Chose the status for the new user account (\"active\" or \"inactive\") and then create the new account by clicking the \"Create user\" button.","title":"Create user"},{"location":"sorbay_ciam/#user-list","text":"Once you have created one or more service users, they will be listed under the \"Accounts\" tab:","title":"User list"},{"location":"sorbay_ciam/#edit-user","text":"To edit a user account, click the symbol, or the \"Open user\" option in the pop-up menu:","title":"Edit user"},{"location":"sorbay_ciam/#delete-user","text":"To delete a user account, click the \"Delete user\" option in the pop-up menu:","title":"Delete user"},{"location":"sorbay_ciam_api/","text":"","title":"API"},{"location":"sorbay_ciam_integration/","text":"Integration of a sorbay_ciam service This guide will show you how to integrate your service into sorbay_ciam using our demo ui application. Let's assume that your domain name is \"example.com\" and you have already created a service with the name \"my-ciam-service\". Configure the sorbay_ciam service Navigate to the \"Settings\" of your service, then go to the \"Pages\" tab. Configure the \"Page Locations\" section as follows: Now scroll down, until you reach the \"CORS\" and \"Custom\" sections. Enter the values according to the following illustration. You will have to create a CNAME record with the DNS provider with which the domain is registered, with the value that's provided in this view. Self-Service flows such as Login, Registration, Updating Settings support two successful response modes: For browsers of a server-side application, identified by the Accept: text/html header , the response will be a redirection. For API clients, such as a client-side AJAX application, identified by the Accept: application/json header , the response will be in JSON. The browser redirects work just for regular browser requests. If you are using an API Client, as mentioned above, the application must redirect the user to the right endpoint in the application. Since our pre-built demo ui container is a client-side application, it is required to provide the locations by means of environmental variables. Run the Docker Demo UI You can test the sorbay_ciam service with our pre-built demo ui container . In order to run the container, it must be configured as follows. Mandatory configuration: * Define the name for the container <container-name> * Define the environment variable for the host name for the web server <your-service>.<your-domain> * Define the environment variable for the API URI <your-domain> * Map the container port to the host <host-port> * Mount the server certificate for SSL into the container <absolute-path-to-certificate> * Mount the server private key for SSL into the container <absolute-path-to-private-key> * Specify the image version <version> Optional configuration, to be provided as environment variables (e.g. -e LOGIN_URI=\" . \"): * Define the environment variable DEFAULT_URI for the default redirection, which is taken into account, unless overridden by one of the following options. * Define the environment variable LOGIN_URI for post-login redirection. * Define the environment variable REGISTRATION_URI for post-registration redirection. * Define the environment variable SETTINGS_URI for post-settings redirection. * Define the environment variable VERIFICATION_URI for post-verification redirection. * Define the environment variable LOGOUT_URI for post-logout redirection. To run the container use the following command: docker run --rm --name <container-name> -e HOST_NAME = \"<your-service>.<your-domain>\" -e API_URI = \"<your-domain>\" -p <host-port>:8443 -v <absolute-path-to-certificate>:/etc/nginx/certs/ssl.crt -v <absolute-path-to-private-key>:/etc/nginx/certs/ssl.key quay.io/usp/sorbay-ciam-self-service:<version> This is a concrete example according to the settings above. Ensure you provide the server certificate and private key for the demo application. docker run --rm --name sorbay_ciam_demo -e HOST_NAME = \"customer-app.my-ciam-service.example.org\" -v /location/to/my-ciam-service.key:/etc/nginx/certs/ssl.key -v /location/to/my-ciam-service.crt:/etc/nginx/certs/ssl.crt -e API_URI = \"https://my-ciam-service.example.org\" -p 4200 :8443 quay.io/usp/sorbay-ciam-self-service:1.0.0","title":"Integration"},{"location":"sorbay_ciam_integration/#integration-of-a-sorbay_ciam-service","text":"This guide will show you how to integrate your service into sorbay_ciam using our demo ui application. Let's assume that your domain name is \"example.com\" and you have already created a service with the name \"my-ciam-service\".","title":"Integration of a sorbay_ciam service"},{"location":"sorbay_ciam_integration/#configure-the-sorbay_ciam-service","text":"Navigate to the \"Settings\" of your service, then go to the \"Pages\" tab. Configure the \"Page Locations\" section as follows: Now scroll down, until you reach the \"CORS\" and \"Custom\" sections. Enter the values according to the following illustration. You will have to create a CNAME record with the DNS provider with which the domain is registered, with the value that's provided in this view. Self-Service flows such as Login, Registration, Updating Settings support two successful response modes: For browsers of a server-side application, identified by the Accept: text/html header , the response will be a redirection. For API clients, such as a client-side AJAX application, identified by the Accept: application/json header , the response will be in JSON. The browser redirects work just for regular browser requests. If you are using an API Client, as mentioned above, the application must redirect the user to the right endpoint in the application. Since our pre-built demo ui container is a client-side application, it is required to provide the locations by means of environmental variables.","title":"Configure the sorbay_ciam service"},{"location":"sorbay_ciam_integration/#run-the-docker-demo-ui","text":"You can test the sorbay_ciam service with our pre-built demo ui container . In order to run the container, it must be configured as follows. Mandatory configuration: * Define the name for the container <container-name> * Define the environment variable for the host name for the web server <your-service>.<your-domain> * Define the environment variable for the API URI <your-domain> * Map the container port to the host <host-port> * Mount the server certificate for SSL into the container <absolute-path-to-certificate> * Mount the server private key for SSL into the container <absolute-path-to-private-key> * Specify the image version <version> Optional configuration, to be provided as environment variables (e.g. -e LOGIN_URI=\" . \"): * Define the environment variable DEFAULT_URI for the default redirection, which is taken into account, unless overridden by one of the following options. * Define the environment variable LOGIN_URI for post-login redirection. * Define the environment variable REGISTRATION_URI for post-registration redirection. * Define the environment variable SETTINGS_URI for post-settings redirection. * Define the environment variable VERIFICATION_URI for post-verification redirection. * Define the environment variable LOGOUT_URI for post-logout redirection. To run the container use the following command: docker run --rm --name <container-name> -e HOST_NAME = \"<your-service>.<your-domain>\" -e API_URI = \"<your-domain>\" -p <host-port>:8443 -v <absolute-path-to-certificate>:/etc/nginx/certs/ssl.crt -v <absolute-path-to-private-key>:/etc/nginx/certs/ssl.key quay.io/usp/sorbay-ciam-self-service:<version> This is a concrete example according to the settings above. Ensure you provide the server certificate and private key for the demo application. docker run --rm --name sorbay_ciam_demo -e HOST_NAME = \"customer-app.my-ciam-service.example.org\" -v /location/to/my-ciam-service.key:/etc/nginx/certs/ssl.key -v /location/to/my-ciam-service.crt:/etc/nginx/certs/ssl.crt -e API_URI = \"https://my-ciam-service.example.org\" -p 4200 :8443 quay.io/usp/sorbay-ciam-self-service:1.0.0","title":"Run the Docker Demo UI"},{"location":"sorbay_risk/","text":"sorbay_risk Functionality The sorbay_risk service provides calculation of a risk score as a basis to e.g. selectively omit a second factor during user authentication. The risk score calculation is based on various information from the client accumulated over logins, including: IP and derived info (like country and ASN) User-Agent and derived info (like browser and OS) Browser fingerprint The calculated risk score is simply a number, between 0 for practically no risk and 1 (or occasionally larger) for maximal risk. If the risk score is low (typ. below 0.4), most likely a user that had already logged in successfully in the past with second factor is now logging in again, and the second factor could be omitted for more user convenience and still more security (thanks to the additional factors already evaluated in the background). Alternatively or additionally, if a risk score was relatively high, your login service might notify the user of a \"login from a new location\", e.g. via email or SMS. For a general overview of Risk-Based Authentication (RBA) see this website , which is mainly research/community driven. The sorbay_risk service is essentially based on the same principles and methods as presented there, with refinements and optimizations. Configuration To configure an instance of the sorbay_risk service, click the \"Service settings\" option in the popup menu of an entry in the services list: You will then be presented with the settings of that instance of the sorbay_risk service. Its functionality is grouped into the following tabs: General - general settings for this service instance Configuration - configuration of this service instance General Service name In the section \"Base Settings\" you can change the name of the service. Save your change by clicking the \"Save\" button in the lower right corner. Delete service Under \"Service deletion\", you can delete this service instance entirely. NOTE: This change cannot be undone! It will irrevocably delete the service and all related data and resources. Delete the service by clicking the \"Delete service\" button, and then confirm the deletion in the following pop-up dialog. Configuration API Keys In the section \"API Keys\" one or more API keys can be defined. You need at least one to use the service, more precisely for the REST APIs of the service. The GUI proposes an API key (a random UUID), but you can change that as desired.","title":"Configuration"},{"location":"sorbay_risk/#sorbay_risk","text":"","title":"sorbay_risk"},{"location":"sorbay_risk/#functionality","text":"The sorbay_risk service provides calculation of a risk score as a basis to e.g. selectively omit a second factor during user authentication. The risk score calculation is based on various information from the client accumulated over logins, including: IP and derived info (like country and ASN) User-Agent and derived info (like browser and OS) Browser fingerprint The calculated risk score is simply a number, between 0 for practically no risk and 1 (or occasionally larger) for maximal risk. If the risk score is low (typ. below 0.4), most likely a user that had already logged in successfully in the past with second factor is now logging in again, and the second factor could be omitted for more user convenience and still more security (thanks to the additional factors already evaluated in the background). Alternatively or additionally, if a risk score was relatively high, your login service might notify the user of a \"login from a new location\", e.g. via email or SMS. For a general overview of Risk-Based Authentication (RBA) see this website , which is mainly research/community driven. The sorbay_risk service is essentially based on the same principles and methods as presented there, with refinements and optimizations.","title":"Functionality"},{"location":"sorbay_risk/#configuration","text":"To configure an instance of the sorbay_risk service, click the \"Service settings\" option in the popup menu of an entry in the services list: You will then be presented with the settings of that instance of the sorbay_risk service. Its functionality is grouped into the following tabs: General - general settings for this service instance Configuration - configuration of this service instance","title":"Configuration"},{"location":"sorbay_risk/#general","text":"","title":"General"},{"location":"sorbay_risk/#service-name","text":"In the section \"Base Settings\" you can change the name of the service. Save your change by clicking the \"Save\" button in the lower right corner.","title":"Service name"},{"location":"sorbay_risk/#delete-service","text":"Under \"Service deletion\", you can delete this service instance entirely. NOTE: This change cannot be undone! It will irrevocably delete the service and all related data and resources. Delete the service by clicking the \"Delete service\" button, and then confirm the deletion in the following pop-up dialog.","title":"Delete service"},{"location":"sorbay_risk/#configuration_1","text":"","title":"Configuration"},{"location":"sorbay_risk/#api-keys","text":"In the section \"API Keys\" one or more API keys can be defined. You need at least one to use the service, more precisely for the REST APIs of the service. The GUI proposes an API key (a random UUID), but you can change that as desired.","title":"API Keys"},{"location":"sorbay_risk_api/","text":"TODO I left the version at 1.0.0-SNAPSHOT, was not clear what to best set there. Maybe also set to \"1alpha1\" as for ciam??","title":"API"},{"location":"sorbay_risk_integration/","text":"Integration of a sorbay_risk service This guide will show you how to integrate your login service with the sorbay_risk service. Let's assume that you have already created a sorbay_risk service. Configure the sorbay_risk service Navigate to the \"Settings\" of your service, then go to the \"Configuration\" tab. Configure at least one API key. It will be needed in your login service for REST calls to the sorbay_risk service. Configure your login service For simplicity, let's assume that your login service provides users who want to log in with a simple login form with userid and password fields, plus has a hidden \"token\" field: userid : Text field password : Password field token : Hidden field That might of course be different in practice, but what is crucial is that there should be a means to at least weakly authenticate a user (more precisely the userid) before using the sorbay_risk service. TODO Where would the base URL be obtained from? => could be shown in the service GUI (selectable to copy and/or button to copy to clipboard) => if so, would need to add documentation for that additional field The base URL of the sorbay_risk service depends on the service name, let's assume the base URL is https://risk.sorbay.com/myriskservice below. Here is the typical flow of requests and responses in case of a successful login: sequenceDiagram autonumber actor client as client/browser participant login as your login service participant risk as sorbay_risk service client ->> login: GET login page login -->> client: login page<br>(with initial js and nonce) client ->> risk: GET js for fingerprint etc. risk -->> client: js for fingerprint etc. client ->> risk: REST call /rest/token<br>(client fingerprint + nonce) risk -->> client: token (opaque) client ->> login: Login POST<br>(userid + password + token) login ->> risk: REST call /rest/risk<br>(userid + token + nonce) risk -->> login: risk score login -->> client : login ok or require<br>further authentication login --> client : (opt. further authentication) login ->> risk: REST call /rest/loginok<br>(userid + token + nonce) risk -->> login: ok 1. \ud83e\udc1a GET login page A user goes to the login location in their browser/client (directly or redirected when trying to access a protected application). 2. \ud83e\udc18 Login page (with initial js and nonce) Your login service sends back a login page with form fields for userid and password , plus a hidden field named token , and the following JavaScript: < script > function sorbayGetSetToken () { const baseUrl = 'https://risk.sorbay.com/myriskservice' ; var nonce = \"603276204091730547274816\" ; import ( baseUrl + '/resources/sorbay-risk.min.js' ) . catch ( e => { throw new Error ( 'client-error: import ' + baseUrl + '/resources/sorbay-risk.min.js failed: ' + e ); }) . then ( js => js . sorbayGetToken ( baseUrl , nonce )) . catch ( e => e . message . startsWith ( 'client-error: ' ) ? e . message : 'client-error: sorbayGetToken() failed: ' + e ) . then ( token => { console . log ( 'setting token in form to: ' + token ); document . getElementById ( 'token' ). value = token ; }); } sorbayGetSetToken (); < /script> IMPORTANT : The nonce value must be generated as a hard-to-guess random string by the login service on the server side ( not on the browser/client) and must be remembered on the server during the login. The nonce is later used to prevent some attacks. 3. \ud83e\udc1a GET js for fingerprint etc. The above JavaScript is run immediately (while the user is free to enter username and password in parallel). It fetches further JavaScript from the sorbay_risk service in order to calculate a browser/client fingerprint. 4. \ud83e\udc18 js for fingerprint etc. The received JavaScript also runs immediately. 5. \ud83e\udc1a REST call /rest/token (client fingerprint + nonce) The JavaScript determines the browser/client fingerprint and makes a rest call to the sorbay_risk service at https://risk.sorbay.com/myriskservice/rest/token , passing both fingerprint and nonce . (Note that the API key is not used in that callout; usage of the API key is restricted to your login service, the API key should never be given/passed to the client.) 6. \ud83e\udc18 token (opaque) The sorbay_risk service returns the token , which is just an opaque string to the client. It contains in encrypted and signed form all collected attributes (IP, User-Agent, fingerprint, plus derived attributes like country, etc.) and the nonce for later comparison. It also contains a validity period and a unique id to further prevent replay attacks. In the JavaScript above, the token is written to the hidden token field. 7. \ud83e\udc1a Login POST (userid + password + token) The user enters userid and password and submits them, posting them to your login service along with the token. (Detail: Ideally, the submit button would only become active once the token had been obtained.) 8. \ud83e\udc1a REST call /rest/risk (userid + token + nonce) The login service validates userid/password and, if correct, makes a REST call to the https://risk.sorbay.com/myriskservice/rest/risk location on the sorbay_risk service, passing userid , nonce and token , plus the API key as X-API-Key HTTP request header. 9. \ud83e\udc18 risk score The sorbay_risk service makes various validations, including: The API key must be equal to one of the configured API keys. It can decipher the token and validate its signature. The token must not have expired. The nonce in the token must be equal to the directly posted nonce. If all validations pass, the sorbay_risk service calculates the risk score and returns it. Your login service receives the risk score and is free what to do based on its value. For example, if the risk score is lower than 0.4, a second factor authentication (SMS, etc.) could be skipped. Or if the risk score is above a certain value, an email could be sent to the user to inform of the login attempt \"from a new location\". (The general recommendation is to first operate in mode where the risk score is calculated and logged, but no decisions are made based on it. After gaining some experience with how the risk score behaves in your specific setup and with your specific classes of users and their habits, start implementing different behavior depending on the risk score and maybe other attributes related to the user.) 10. \ud83e\udc18 login ok or require further authentication You login service logs in the user if the risk score was deemed low enough, otherwise initiates further authentication. 11. (opt. further authentication) Optionally further authentication steps between client and your login service. 12. \ud83e\udc1a REST call /rest/loginok (userid + token + nonce) Whenever your login service decides that login with that user was successful, your login service makes a REST call to the https://risk.sorbay.com/myriskservice/rest/loginok location at the sorbay_risk service to signal that to the sorbay_risk service, with the same parameters as for the risk call further above. Only then does the sorbay_risk service store the attributes (partially hashed in special way with a secret for privacy reasons) in its database as the basis for future risk score evaluations. 13. \ud83e\udc18 ok The sorbay_risk service confirms that it successfully recorded the login as successful.","title":"Integration"},{"location":"sorbay_risk_integration/#integration-of-a-sorbay_risk-service","text":"This guide will show you how to integrate your login service with the sorbay_risk service. Let's assume that you have already created a sorbay_risk service.","title":"Integration of a sorbay_risk service"},{"location":"sorbay_risk_integration/#configure-the-sorbay_risk-service","text":"Navigate to the \"Settings\" of your service, then go to the \"Configuration\" tab. Configure at least one API key. It will be needed in your login service for REST calls to the sorbay_risk service.","title":"Configure the sorbay_risk service"},{"location":"sorbay_risk_integration/#configure-your-login-service","text":"For simplicity, let's assume that your login service provides users who want to log in with a simple login form with userid and password fields, plus has a hidden \"token\" field: userid : Text field password : Password field token : Hidden field That might of course be different in practice, but what is crucial is that there should be a means to at least weakly authenticate a user (more precisely the userid) before using the sorbay_risk service. TODO Where would the base URL be obtained from? => could be shown in the service GUI (selectable to copy and/or button to copy to clipboard) => if so, would need to add documentation for that additional field The base URL of the sorbay_risk service depends on the service name, let's assume the base URL is https://risk.sorbay.com/myriskservice below. Here is the typical flow of requests and responses in case of a successful login: sequenceDiagram autonumber actor client as client/browser participant login as your login service participant risk as sorbay_risk service client ->> login: GET login page login -->> client: login page<br>(with initial js and nonce) client ->> risk: GET js for fingerprint etc. risk -->> client: js for fingerprint etc. client ->> risk: REST call /rest/token<br>(client fingerprint + nonce) risk -->> client: token (opaque) client ->> login: Login POST<br>(userid + password + token) login ->> risk: REST call /rest/risk<br>(userid + token + nonce) risk -->> login: risk score login -->> client : login ok or require<br>further authentication login --> client : (opt. further authentication) login ->> risk: REST call /rest/loginok<br>(userid + token + nonce) risk -->> login: ok","title":"Configure your login service"},{"location":"sorbay_risk_integration/#1-get-login-page","text":"A user goes to the login location in their browser/client (directly or redirected when trying to access a protected application).","title":"1. \ud83e\udc1a GET login page"},{"location":"sorbay_risk_integration/#2-login-page-with-initial-js-and-nonce","text":"Your login service sends back a login page with form fields for userid and password , plus a hidden field named token , and the following JavaScript: < script > function sorbayGetSetToken () { const baseUrl = 'https://risk.sorbay.com/myriskservice' ; var nonce = \"603276204091730547274816\" ; import ( baseUrl + '/resources/sorbay-risk.min.js' ) . catch ( e => { throw new Error ( 'client-error: import ' + baseUrl + '/resources/sorbay-risk.min.js failed: ' + e ); }) . then ( js => js . sorbayGetToken ( baseUrl , nonce )) . catch ( e => e . message . startsWith ( 'client-error: ' ) ? e . message : 'client-error: sorbayGetToken() failed: ' + e ) . then ( token => { console . log ( 'setting token in form to: ' + token ); document . getElementById ( 'token' ). value = token ; }); } sorbayGetSetToken (); < /script> IMPORTANT : The nonce value must be generated as a hard-to-guess random string by the login service on the server side ( not on the browser/client) and must be remembered on the server during the login. The nonce is later used to prevent some attacks.","title":"2. \ud83e\udc18 Login page (with initial js and nonce)"},{"location":"sorbay_risk_integration/#3-get-js-for-fingerprint-etc","text":"The above JavaScript is run immediately (while the user is free to enter username and password in parallel). It fetches further JavaScript from the sorbay_risk service in order to calculate a browser/client fingerprint.","title":"3. \ud83e\udc1a GET js for fingerprint etc."},{"location":"sorbay_risk_integration/#4-js-for-fingerprint-etc","text":"The received JavaScript also runs immediately.","title":"4. \ud83e\udc18 js for fingerprint etc."},{"location":"sorbay_risk_integration/#5-rest-call-resttoken-client-fingerprint-nonce","text":"The JavaScript determines the browser/client fingerprint and makes a rest call to the sorbay_risk service at https://risk.sorbay.com/myriskservice/rest/token , passing both fingerprint and nonce . (Note that the API key is not used in that callout; usage of the API key is restricted to your login service, the API key should never be given/passed to the client.)","title":"5. \ud83e\udc1a REST call /rest/token (client fingerprint + nonce)"},{"location":"sorbay_risk_integration/#6-token-opaque","text":"The sorbay_risk service returns the token , which is just an opaque string to the client. It contains in encrypted and signed form all collected attributes (IP, User-Agent, fingerprint, plus derived attributes like country, etc.) and the nonce for later comparison. It also contains a validity period and a unique id to further prevent replay attacks. In the JavaScript above, the token is written to the hidden token field.","title":"6. \ud83e\udc18 token (opaque)"},{"location":"sorbay_risk_integration/#7-login-post-userid-password-token","text":"The user enters userid and password and submits them, posting them to your login service along with the token. (Detail: Ideally, the submit button would only become active once the token had been obtained.)","title":"7. \ud83e\udc1a Login POST (userid + password + token)"},{"location":"sorbay_risk_integration/#8-rest-call-restrisk-userid-token-nonce","text":"The login service validates userid/password and, if correct, makes a REST call to the https://risk.sorbay.com/myriskservice/rest/risk location on the sorbay_risk service, passing userid , nonce and token , plus the API key as X-API-Key HTTP request header.","title":"8. \ud83e\udc1a REST call /rest/risk (userid + token + nonce)"},{"location":"sorbay_risk_integration/#9-risk-score","text":"The sorbay_risk service makes various validations, including: The API key must be equal to one of the configured API keys. It can decipher the token and validate its signature. The token must not have expired. The nonce in the token must be equal to the directly posted nonce. If all validations pass, the sorbay_risk service calculates the risk score and returns it. Your login service receives the risk score and is free what to do based on its value. For example, if the risk score is lower than 0.4, a second factor authentication (SMS, etc.) could be skipped. Or if the risk score is above a certain value, an email could be sent to the user to inform of the login attempt \"from a new location\". (The general recommendation is to first operate in mode where the risk score is calculated and logged, but no decisions are made based on it. After gaining some experience with how the risk score behaves in your specific setup and with your specific classes of users and their habits, start implementing different behavior depending on the risk score and maybe other attributes related to the user.)","title":"9. \ud83e\udc18 risk score"},{"location":"sorbay_risk_integration/#10-login-ok-or-require-further-authentication","text":"You login service logs in the user if the risk score was deemed low enough, otherwise initiates further authentication.","title":"10. \ud83e\udc18 login ok or require further authentication"},{"location":"sorbay_risk_integration/#11-opt-further-authentication","text":"Optionally further authentication steps between client and your login service.","title":"11. (opt. further authentication)"},{"location":"sorbay_risk_integration/#12-rest-call-restloginok-userid-token-nonce","text":"Whenever your login service decides that login with that user was successful, your login service makes a REST call to the https://risk.sorbay.com/myriskservice/rest/loginok location at the sorbay_risk service to signal that to the sorbay_risk service, with the same parameters as for the risk call further above. Only then does the sorbay_risk service store the attributes (partially hashed in special way with a secret for privacy reasons) in its database as the basis for future risk score evaluations.","title":"12. \ud83e\udc1a REST call /rest/loginok (userid + token + nonce)"},{"location":"sorbay_risk_integration/#13-ok","text":"The sorbay_risk service confirms that it successfully recorded the login as successful.","title":"13. \ud83e\udc18 ok"},{"location":"workspaces/","text":"Workspaces All of your workspaces are available through the top-most navigation entry on the left side: Create new workspace To create a new workspace, select the last popup menu option, \"Create workspace\": Enter a name for the new workspace. The new workspace will be created and immediately selected in the workspace selector in the navigation. Edit workspace To change settings of a workspace - such as the name - choose the \"Settings\" option: It will open the settings page which allows you to change workspace settings, cede ownership of the workspace to another user, delete the workspace etc. Delete workspace On the \"Settings\" page you can delete the currently selected workspace by clicking the \"Delete workspace\" button in the \"Workspace deletion\" section of the screen. After confirming the deletion by clicking \"Yes\" in the pop-up confirmation dialog, the workspace and all associated services and resources will be removed irrevocably.","title":"Workspaces"},{"location":"workspaces/#workspaces","text":"All of your workspaces are available through the top-most navigation entry on the left side:","title":"Workspaces"},{"location":"workspaces/#create-new-workspace","text":"To create a new workspace, select the last popup menu option, \"Create workspace\": Enter a name for the new workspace. The new workspace will be created and immediately selected in the workspace selector in the navigation.","title":"Create new workspace"},{"location":"workspaces/#edit-workspace","text":"To change settings of a workspace - such as the name - choose the \"Settings\" option: It will open the settings page which allows you to change workspace settings, cede ownership of the workspace to another user, delete the workspace etc.","title":"Edit workspace"},{"location":"workspaces/#delete-workspace","text":"On the \"Settings\" page you can delete the currently selected workspace by clicking the \"Delete workspace\" button in the \"Workspace deletion\" section of the screen. After confirming the deletion by clicking \"Yes\" in the pop-up confirmation dialog, the workspace and all associated services and resources will be removed irrevocably.","title":"Delete workspace"}]}